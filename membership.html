<!DOCTYPE html>
<html lang="mr" x-data="membershipSystem()">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiv Sena UBT | Chandrapur Membership</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;900&family=Noto+Sans+Marathi:wght@400;900&display=swap');
        body { font-family: 'Outfit', 'Noto Sans Marathi', sans-serif; background: #050505; color: white; }
        
        .business-card {
            width: 100%;
            aspect-ratio: 1.75 / 1; 
            background: #111;
            border: 1px solid rgba(255, 102, 52, 0.3);
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 10px 40px -10px rgba(255, 102, 52, 0.5);
        }

        .sena-gradient { background: linear-gradient(135deg, #FF6634 0%, #CC4400 100%); }
        .step-badge { @apply w-5 h-5 rounded-full bg-orange-500 text-black text-[9px] font-black flex items-center justify-center inline-flex mr-2; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="antialiased min-h-screen py-6 flex flex-col items-center">

    <div class="text-center mb-6 px-6">
        <img src="https://www.shivsena.in/images/logo.png" class="h-12 mx-auto mb-2" alt="Logo">
        <h1 class="text-2xl font-black uppercase italic tracking-tighter">‡§ö‡§Ç‡§¶‡•ç‡§∞‡§™‡•Ç‡§∞ ‡§ú‡§ø‡§≤‡•ç‡§π‡§æ ‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä</h1>
        <p class="text-orange-500 font-bold text-[9px] uppercase tracking-widest mt-1">‡§∂‡§ø‡§µ‡§∏‡•á‡§®‡§æ (‡§â‡§¶‡•ç‡§ß‡§µ ‡§¨‡§æ‡§≥‡§æ‡§∏‡§æ‡§π‡•á‡§¨ ‡§†‡§æ‡§ï‡§∞‡•á)</p>
    </div>

    <div class="w-full max-w-sm px-6">
        
        <div x-show="!isGenerated" class="bg-[#111] p-6 rounded-[2.5rem] border border-white/5 space-y-4">
            <div class="flex justify-center mb-2">
                <label class="cursor-pointer group">
                    <input type="file" @change="handlePhoto" class="hidden" accept="image/*">
                    <div class="w-20 h-20 rounded-2xl border-2 border-dashed border-gray-700 flex items-center justify-center overflow-hidden group-hover:border-orange-500 transition-all">
                        <template x-if="!photo"><span class="text-[8px] text-gray-500 font-black text-center uppercase">‡§´‡•ã‡§ü‡•ã ‡§ú‡•ã‡§°‡§æ</span></template>
                        <template x-if="photo"><img :src="photo" class="w-full h-full object-cover"></template>
                    </div>
                </label>
            </div>

            <div class="space-y-3">
                <input type="text" x-model="formData.name" placeholder="‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§æ‡§µ (Full Name)" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-orange-500">
                
                <input type="tel" x-model="formData.phone" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§à‡§≤ ‡§®‡§Ç‡§¨‡§∞ (WhatsApp)" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-orange-500">
                
                <select x-model="formData.taluka" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm text-orange-500 font-bold outline-none">
                    <option value="">‡§§‡§æ‡§≤‡•Å‡§ï‡§æ ‡§®‡§ø‡§µ‡§°‡§æ (Select Taluka)</option>
                    <template x-for="t in talukas">
                        <option :value="t" x-text="t"></option>
                    </template>
                </select>

                <textarea x-model="formData.address" placeholder="‡§ó‡§≤‡•ç‡§≤‡•Ä/‡§µ‡•â‡§∞‡•ç‡§° ‡§Ü‡§£‡§ø ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡§§‡•ç‡§§‡§æ (Manual Address)" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm outline-none h-20"></textarea>
            </div>

            <button @click="generateCard" :disabled="loading" class="w-full sena-gradient py-4 rounded-xl font-black text-xs uppercase tracking-widest shadow-xl">
                <span x-text="loading ? '‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...' : '‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§æ'"></span>
            </button>
        </div>

        <div x-show="isGenerated" x-cloak class="space-y-6">
            
            <div class="bg-orange-500/10 border border-orange-500/20 p-4 rounded-2xl text-[10px] font-bold">
                <p><span class="step-badge">1</span> 'Download Card' ‡§µ‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§æ.</p>
                <p class="mt-2"><span class="step-badge">2</span> 'Copy Caption' ‡§¶‡§æ‡§¨‡•Ç‡§® ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏‡§µ‡§∞ ‡§∂‡•á‡§Ö‡§∞ ‡§ï‡§∞‡§æ.</p>
            </div>

            <div id="idCard" class="business-card bg-black">
                <div class="absolute top-0 left-0 right-0 h-[28%] sena-gradient px-3 flex justify-between items-center">
                    <img src="https://www.shivsena.in/images/saheb_unit.png" class="h-8 md:h-10" alt="Leader">
                    <div class="text-center">
                        <p class="text-[6px] font-black uppercase text-white/80">Shiv Sena (UBT)</p>
                        <h2 class="text-[10px] font-black italic tracking-tighter">MEMBER IDENTITY</h2>
                    </div>
                    <img src="https://www.shivsena.in/images/logo.png" class="h-7 brightness-0 invert" alt="Mashaal">
                </div>

                <div class="absolute top-[28%] left-0 right-0 bottom-0 p-3 flex items-center gap-4">
                    <div class="w-16 h-16 rounded-lg border-2 border-orange-500/20 overflow-hidden shrink-0 shadow-lg">
                        <img :src="photo" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="text-sm font-black uppercase text-white truncate" x-text="formData.name"></h3>
                        <p class="text-orange-500 font-bold text-[8px] uppercase tracking-widest" x-text="'‡§§‡§æ‡§≤‡•Å‡§ï‡§æ: ' + formData.taluka"></p>
                        <p class="text-gray-500 text-[7px] font-bold truncate mt-0.5" x-text="formData.address"></p>
                    </div>
                </div>

                <div class="absolute bottom-1 right-3 text-[5px] text-gray-700 font-black uppercase">
                    Ballarpur Vidhansabha 2026
                </div>
            </div>

            <div class="grid grid-cols-2 gap-3">
                <button @click="downloadID" class="bg-white text-black py-4 rounded-xl font-black text-[9px] uppercase tracking-widest">üì• Download Card</button>
                <button @click="copyCaption" class="bg-blue-600 text-white py-4 rounded-xl font-black text-[9px] uppercase tracking-widest" x-text="copyBtnText"></button>
            </div>
            
            <button @click="isGenerated = false" class="w-full text-gray-600 font-bold text-[9px] uppercase text-center">‡§Æ‡§æ‡§ó‡•á ‡§ú‡§æ (Back)</button>
        </div>
    </div>

    <script>
        function membershipSystem() {
            return {
                isGenerated: false, loading: false, photo: null,
                copyBtnText: 'üìã Copy Caption',
                // Full List of Chandrapur Talukas
                talukas: [
                    "Ballarpur (‡§¨‡§≤‡•ç‡§≤‡§æ‡§∞‡§™‡•Ç‡§∞)", "Chandrapur (‡§ö‡§Ç‡§¶‡•ç‡§∞‡§™‡•Ç‡§∞)", "Warora (‡§µ‡§∞‡•ã‡§∞‡§æ)", 
                    "Bhadravati (‡§≠‡§¶‡•ç‡§∞‡§æ‡§µ‡§§‡•Ä)", "Chimur (‡§ö‡§ø‡§Æ‡•Ç‡§∞)", "Mul (‡§Æ‡•Ç‡§≤)", 
                    "Sawali (‡§∏‡§æ‡§µ‡§≤‡•Ä)", "Gondpipri (‡§ó‡•ã‡§Ç‡§°‡§™‡§ø‡§™‡§∞‡•Ä)", "Korpana (‡§ï‡•ã‡§∞‡§™‡§®‡§æ)", 
                    "Rajura (‡§∞‡§æ‡§ú‡•Å‡§∞‡§æ)", "Jiwati (‡§ú‡§ø‡§µ‡§§‡•Ä)", "Brahmapuri (‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§™‡•Å‡§∞‡•Ä)", 
                    "Nagbhir (‡§®‡§æ‡§ó‡§≠‡•Ä‡§°)", "Sindewahi (‡§∏‡§ø‡§Ç‡§¶‡•á‡§µ‡§æ‡§π‡•Ä)", "Pombhurna (‡§™‡•ã‡§Ç‡§≠‡•Å‡§∞‡•ç‡§£‡§æ)"
                ],
                formData: { name: '', phone: '', taluka: '', address: '' },
                
                handlePhoto(e) {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    reader.onload = (f) => { this.photo = f.target.result; };
                    reader.readAsDataURL(file);
                },

                async generateCard() {
                    if(!this.photo || !this.formData.name || !this.formData.taluka) { 
                        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§æ‡§µ, ‡§´‡•ã‡§ü‡•ã ‡§Ü‡§£‡§ø ‡§§‡§æ‡§≤‡•Å‡§ï‡§æ ‡§®‡§ø‡§µ‡§°‡§æ!"); 
                        return; 
                    }
                    this.loading = true;

                    // Data Sync to Formspree
                    try {
                        await fetch('https://formspree.io/f/meeeqrad', {
                            method: 'POST',
                            body: JSON.stringify(this.formData),
                            headers: { 'Content-Type': 'application/json' }
                        });
                    } catch (e) { console.log("Sync error"); }

                    this.loading = false;
                    this.isGenerated = true;
                },

                downloadID() {
                    html2canvas(document.getElementById('idCard'), { scale: 4, useCORS: true }).then(canvas => {
                        const a = document.createElement('a');
                        a.href = canvas.toDataURL("image/png");
                        a.download = `Sena_Card_${this.formData.name}.png`;
                        a.click();
                    });
                },

                copyCaption() {
                    const text = `‡§Æ‡•á‡§∞‡§æ ‡§∂‡§ø‡§µ‡§∏‡•á‡§®‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à! üí™\n‡§∂‡§ø‡§µ‡§∏‡•á‡§®‡§æ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§¨‡§®‡§ï‡§∞ ‡§ó‡§∞‡•ç‡§µ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§\n\n‡§™‡§§‡•ç‡§§‡§æ: ${this.formData.taluka}, ‡§ö‡§Ç‡§¶‡•ç‡§∞‡§™‡•Ç‡§∞\nüö© ‡§ú‡§Ø ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞!\nüëâ https://shivsenaubt.vercel.app/`;
                    navigator.clipboard.writeText(text);
                    this.copyBtnText = 'Copied! ‚úÖ';
                    setTimeout(() => this.copyBtnText = 'üìã Copy Caption', 2000);
                }
            }
        }
    </script>
</body>
</html>
