<!DOCTYPE html>
<html lang="mr" x-data="membershipSystem()">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shiv Sena UBT | Maharashtra Membership</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;900&display=swap');
        body { font-family: 'Outfit', sans-serif; background: #050505; color: white; }
        .id-card-glow { box-shadow: 0 0 50px -10px rgba(255, 102, 52, 0.5); }
        .sena-gradient { background: linear-gradient(135deg, #FF6634 0%, #CC4400 100%); }
        .step-badge { @apply w-5 h-5 rounded-full bg-orange-500 text-black text-[9px] font-black flex items-center justify-center inline-flex mr-2; }
        select option { background: #111; color: white; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="antialiased min-h-screen py-6 flex flex-col items-center">

    <div class="text-center mb-6">
        <img src="https://www.shivsena.in/images/logo.png" class="h-14 mx-auto mb-2" alt="Logo">
        <h1 class="text-2xl font-black uppercase italic tracking-tighter">‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä</h1>
        <p class="text-orange-500 font-bold text-[9px] uppercase tracking-widest">Shiv Sena (Uddhav Balasaheb Thackeray)</p>
    </div>

    <div class="w-full max-w-sm px-6">
        
        <div x-show="!isGenerated" class="bg-[#111] p-6 rounded-[2.5rem] border border-white/5 space-y-4">
            
            <div class="flex justify-center mb-2">
                <label class="cursor-pointer group">
                    <input type="file" @change="handlePhoto" class="hidden" accept="image/*">
                    <div class="w-20 h-20 rounded-full border-2 border-dashed border-gray-700 flex items-center justify-center overflow-hidden group-hover:border-orange-500 transition-all">
                        <template x-if="!photo"><span class="text-[8px] text-gray-500 font-black uppercase text-center">‡§´‡•ã‡§ü‡•ã<br>Upload</span></template>
                        <template x-if="photo"><img :src="photo" class="w-full h-full object-cover"></template>
                    </div>
                </label>
            </div>

            <input type="text" x-model="formData.name" placeholder="‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡§æ‡§µ (Full Name)" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-orange-500">
            
            <select x-model="formData.district" @change="updateTalukas" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm outline-none text-orange-500 font-bold">
                <option value="">‡§ú‡§ø‡§≤‡•ç‡§π‡§æ ‡§®‡§ø‡§µ‡§°‡§æ (Select District)</option>
                <template x-for="dist in Object.keys(geoData)">
                    <option :value="dist" x-text="dist"></option>
                </template>
            </select>

            <select x-model="formData.taluka" :disabled="!formData.district" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm outline-none disabled:opacity-30">
                <option value="">‡§§‡§æ‡§≤‡•Å‡§ï‡§æ ‡§®‡§ø‡§µ‡§°‡§æ (Select Taluka)</option>
                <template x-for="tal in talukas">
                    <option :value="tal" x-text="tal"></option>
                </template>
            </select>

            <textarea x-model="formData.address" placeholder="‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡§§‡•ç‡§§‡§æ (Manual Address)" class="w-full bg-black border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-orange-500 h-20"></textarea>

            <button @click="generateCard" :disabled="loading" class="w-full sena-gradient py-4 rounded-xl font-black text-xs uppercase tracking-widest shadow-xl">
                <span x-text="loading ? '‡§®‡•ã‡§Ç‡§¶‡§£‡•Ä ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...' : '‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Æ‡§ø‡§≥‡§µ‡§æ'"></span>
            </button>
        </div>

        <div x-show="isGenerated" x-cloak class="space-y-6">
            
            <div class="bg-orange-500/5 border border-orange-500/20 p-5 rounded-3xl">
                <p class="text-[11px] font-bold mb-3 leading-relaxed">
                    <span class="step-badge">1</span> 'Download ID' ‡§µ‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•Ç‡§® ‡§´‡•ã‡§ü‡•ã ‡§∏‡•á‡§µ‡•ç‡§π ‡§ï‡§∞‡§æ.<br>
                    <span class="step-badge">2</span> 'Copy Caption' ‡§¶‡§æ‡§¨‡•Ç‡§® ‡§Æ‡§ú‡§ï‡•Ç‡§∞ ‡§ï‡•â‡§™‡•Ä ‡§ï‡§∞‡§æ.<br>
                    <span class="step-badge">3</span> WhatsApp Status ‡§µ‡§∞ ‡§´‡•ã‡§ü‡•ã‡§∏‡§π ‡§∂‡•á‡§Ö‡§∞ ‡§ï‡§∞‡§æ!
                </p>
                <div class="grid grid-cols-2 gap-2">
                    <button @click="downloadID" class="bg-white text-black py-3 rounded-xl font-black text-[9px] uppercase">üì• Download ID</button>
                    <button @click="copyCaption" class="bg-blue-600 text-white py-3 rounded-xl font-black text-[9px] uppercase" x-text="copyBtnText"></button>
                </div>
            </div>

            <div id="idCard" class="id-card-glow bg-[#181818] rounded-[2.5rem] overflow-hidden relative aspect-[3/4.5] flex flex-col border border-white/10">
                <div class="sena-gradient p-5 text-center">
                    <img src="https://www.shivsena.in/images/logo.png" class="h-10 mx-auto mb-1 brightness-0 invert" alt="">
                    <h2 class="text-lg font-black italic uppercase tracking-tighter">Digital Identity</h2>
                </div>
                
                <div class="flex-1 flex flex-col items-center justify-center p-6 text-center space-y-4">
                    <div class="w-28 h-28 rounded-3xl border-4 border-orange-500/10 overflow-hidden shadow-2xl">
                        <img :src="photo" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <h3 class="text-xl font-black tracking-tight" x-text="formData.name"></h3>
                        <p class="text-orange-500 font-bold text-[8px] uppercase tracking-[0.2em] mt-1" x-text="formData.district + ' | ' + formData.taluka"></p>
                    </div>
                    <p class="text-[9px] text-gray-500 italic px-4" x-text="formData.address"></p>
                </div>

                <div class="bg-black/40 p-5 border-t border-white/5 text-center">
                    <p class="text-[7px] text-orange-500 font-black uppercase tracking-widest mb-1">Approved Membership</p>
                    <p class="text-[9px] font-bold text-white/80 uppercase">Shiv Sena (UBT) Maharashtra</p>
                </div>
            </div>

            <button @click="isGenerated = false" class="w-full text-gray-600 font-bold text-[9px] uppercase text-center">‡§Æ‡§æ‡§ó‡•á ‡§ú‡§æ (Back)</button>
        </div>
    </div>

    <script>
        function membershipSystem() {
            return {
                isGenerated: false, loading: false, photo: null,
                copyBtnText: 'üìã Copy Caption',
                talukas: [],
                formData: { name: '', district: '', taluka: '', address: '', phone: '' },
                
                // Maharashtra Data Structure
                geoData: {
                    "Chandrapur": ["Ballarpur", "Chandrapur", "Warora", "Bhadravati", "Chimur", "Mul", "Sawali", "Gondpipri", "Korpana", "Rajura", "Jiwati", "Brahmapuri", "Nagbhir", "Sindewahi", "Pombhurna"],
                    "Nagpur": ["Nagpur City", "Nagpur Rural", "Kamptee", "Hingna", "Katol", "Narkhed", "Savner", "Kalameshwar", "Ramtek", "Parseoni", "Mauda", "Kuhi", "Bhiwapur", "Umred"],
                    "Mumbai City": ["Colaba", "Dharavi", "Sion", "Wadala", "Byculla", "Malabar Hill"],
                    "Mumbai Suburban": ["Andheri", "Bandra", "Borivali", "Kurla", "Ghatkopar", "Mulund"],
                    "Pune": ["Pune City", "Haveli", "Khed", "Ambegaon", "Junner", "Shirur", "Daund", "Indapur", "Baramati", "Purandhar", "Bhor", "Velhe", "Mulshi", "Maval"],
                    "Nashik": ["Nashik", "Sinnar", "Igatpuri", "Trimbak", "Niphad", "Yeola", "Nandgaon", "Chandwad", "Kalwan", "Baglan", "Surgana", "Peint", "Deola"],
                    "Thane": ["Thane", "Kalyan", "Murbad", "Bhiwandi", "Shahapur", "Ulhasnagar", "Ambarnath"],
                    "Palghar": ["Palghar", "Vada", "Talasari", "Jawhar", "Mokhada", "Dahanu", "Vasai", "Vikramgad"],
                    "Ratnagiri": ["Ratnagiri", "Sangameshwar", "Lanja", "Rajapur", "Chiplun", "Guhagar", "Khed", "Dapoli", "Mandangad"],
                    "Aurangabad": ["Aurangabad", "Paithan", "Gangapur", "Vaijapur", "Kannad", "Khuldabad", "Sillod", "Phulambri", "Soegaon"],
                    "Ahmednagar": ["Ahmednagar", "Rahuri", "Shrirampur", "Nevasa", "Shevgaon", "Pathardi", "Parner", "Sangamner", "Akole", "Kopargaon", "Shrigonda", "Karjat", "Jamkhed", "Rahata"]
                    // Note: You can add all other 36 districts similarly. 
                },

                updateTalukas() {
                    this.talukas = this.geoData[this.formData.district] || [];
                    this.formData.taluka = '';
                },

                handlePhoto(e) {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    reader.onload = (f) => { this.photo = f.target.result; };
                    reader.readAsDataURL(file);
                },

                generateCard() {
                    if(!this.photo || !this.formData.district) { alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§∞‡•ç‡§µ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ!"); return; }
                    this.loading = true;
                    // Background data sync
                    fetch('https://formspree.io/f/meeeqrad', {
                        method: 'POST',
                        body: JSON.stringify(this.formData),
                        headers: {'Content-Type': 'application/json'}
                    }).finally(() => {
                        this.loading = false;
                        this.isGenerated = true;
                    });
                },

                downloadID() {
                    html2canvas(document.getElementById('idCard'), { scale: 3 }).then(canvas => {
                        const a = document.createElement('a');
                        a.href = canvas.toDataURL();
                        a.download = `Sena_Member_${this.formData.name}.png`;
                        a.click();
                    });
                },

                copyCaption() {
                    const text = `‡§Æ‡•á‡§∞‡§æ ‡§∂‡§ø‡§µ‡§∏‡•á‡§®‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à! üí™\n‡§∂‡§ø‡§µ‡§∏‡•á‡§®‡§æ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§ï‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§¨‡§®‡§ï‡§∞ ‡§ó‡§∞‡•ç‡§µ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§\n\n‡§™‡§§‡•ç‡§§‡§æ: ${this.formData.taluka}, ${this.formData.district}\n\n‡§ú‡•Å‡§°‡§º‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§∂‡§ø‡§µ‡§∏‡•à‡§®‡§ø‡§ï ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡§æ‡§è‡§Ç! üö©\nüëâ https://shivsenaubt.vercel.app/\n‡§ú‡§Ø ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞!`;
                    navigator.clipboard.writeText(text);
                    this.copyBtnText = 'Copied! ‚úÖ';
                    setTimeout(() => this.copyBtnText = 'üìã Copy Caption', 2000);
                }
            }
        }
    </script>
</body>
</html>
